ALTER SESSION SET NLS_DATE_FORMAT='MM/DD/YYYY';

CREATE TABLE CLIENTE(
cod_cli char(3) PRIMARY KEY,
nombre varchar2(20),
apellidos varchar2(40),
domicilio varchar2(40),
cod_postal char(5),
localidad varchar2(40),
telefono char(9),
tipo_cli varchar2(10) check (tipo_cli in('Oro','Plata','Bronce')),
bono_canjeable number(4));

CREATE TABLE PEDIDO(
num_ped CHAR(6) PRIMARY KEY,
fecha_ped DATE,
hora_ped TIMESTAMP,
hora_servir TIMESTAMP,
hora_entrega TIMESTAMP,
total_pedido NUMBER(6,2),
cliente CHAR(3),
CONSTRAINT ped_cli_FK FOREIGN KEY (cliente) REFERENCES cliente(cod_cli) ON DELETE SET NULL);

CREATE TABLE PLATO (
cod_plato CHAR(4) PRIMARY KEY,
nombre VARCHAR2(40),
precio NUMBER(4,2),
stock NUMBER(4)
);

CREATE TABLE DETALLE_PEDIDO (
num_pedido CHAR(6),
num_linea CHAR(2),
cantidad NUMBER(4),
plato CHAR(4),
total_linea NUMBER (4,2),
CONSTRAINT det_ped_PK PRIMARY KEY (num_pedido, num_linea),
CONSTRAINT det_ped_FK FOREIGN KEY (num_pedido) REFERENCES PEDIDO(num_ped) ON DELETE CASCADE,
CONSTRAINT det_pla_FK FOREIGN KEY (plato) REFERENCES PLATO(cod_plato) ON DELETE CASCADE);

/* VALORES EN TABLA CLIENTE*/
INSERT INTO CLIENTE VALUES ('101','Luis','Ramírez Pardo','C/Piedra,48','04720','Aguadulce','950998877','Plata',10);
INSERT INTO CLIENTE VALUES ('102','María','Sánchez Cid','C/Lourdes,8','04720','Aguadulce','678234109','Bronce',0);
INSERT INTO CLIENTE VALUES ('103','Martín','Guerrero López','C/Plutón,2','04740','Roquetas de Mar','666099009','Bronce',0);
INSERT INTO CLIENTE VALUES ('104','Úrsula','Delta Camacho','C/Singular,109','04740','Roquetas de Mar','600156887','Bronce',0);
INSERT INTO CLIENTE VALUES ('105','Carmen','Hernández Pío','C/Sol Naciente,29','04720','Aguadulce','697111222','Oro',30);
INSERT INTO CLIENTE VALUES ('106','Pedro','Jiménez Ruiz','C/Estanislao,9','04621','Las Marinas','950009988','Bronce',0);
INSERT INTO CLIENTE VALUES ('107','Raúl','Rodrigo Roca','C/Salvatore,1','04621','Las Marinas','600900800','Plata',10);
INSERT INTO CLIENTE VALUES ('108','Soledad','Campillo Molina','C/Paraiso,33','04720','Aguadulce','950885522','Bronce',0);

/* VALORES EN TABLA PEDIDO */
INSERT INTO PEDIDO VALUES ('100101','09/21/2018','21-SEP-18 10.00.00','21-SEP-18 1.30.00','21-SEP-18 2.35.00', 26.03, '101');
INSERT INTO PEDIDO VALUES ('100102','09/21/2018','21-SEP-18 10.15.00','21-SEP-18 1.00.00','21-SEP-18 2.58.00', 25.70, '102');
INSERT INTO PEDIDO VALUES ('100103','09/21/2018','21-SEP-18 10.30.00','21-SEP-18 2.45.00','21-SEP-18 2.47.00', 75.5, '103');
INSERT INTO PEDIDO VALUES ('100104','09/21/2018','21-SEP-18 10.44.00','21-SEP-18 2.30.00','21-SEP-18 2.40.00', 3.75, '105');
INSERT INTO PEDIDO VALUES ('100105','09/21/2018','21-SEP-18 10.56.00','21-SEP-18 2.00.00','21-SEP-18 2.08.00', 14.80, '108');
INSERT INTO PEDIDO VALUES ('100106','09/22/2018','22-SEP-18 1.08.00','22-SEP-18 2.15.00','22-SEP-18 2.20.00', 23.25, '104');
INSERT INTO PEDIDO VALUES ('100107','09/22/2018','22-SEP-18 10.55.00','22-SEP-18 2.15.00','22-SEP-18 2.08.00', 21,'101');
INSERT INTO PEDIDO VALUES ('100108','09/22/2018','22-SEP-18 11.56.00','22-SEP-18 1.45.00','22-SEP-18 2.01.00',24.40, '107');
INSERT INTO PEDIDO VALUES ('100109','10/05/2018','05-OCT-18 11.56.00','05-OCT-18 2.45.00','05-OCT-18 2.48.00',19.18, '104');
INSERT INTO PEDIDO VALUES ('100110','10/05/2018','05-OCT-18 10.05.00','05-OCT-18 2.00.00','05-OCT-18 2.05.00', 30, '102');
INSERT INTO PEDIDO VALUES ('100111','10/05/2018','05-OCT-18 11.34.00','05-OCT-18 2.30.00','05-OCT-18 2.38.00', 3.85, '106');
INSERT INTO PEDIDO VALUES ('100112','10/05/2018','05-OCT-18 12.25.00','05-OCT-18 2.15.00','05-OCT-18 2.20.00', 17.25, '105');
INSERT INTO PEDIDO VALUES ('100113','10/05/2018','05-OCT-18 09.45.00','05-OCT-18 2.45.00','05-OCT-18 1.56.00', 24.75, '107');
INSERT INTO PEDIDO VALUES ('100114','10/05/2018','05-OCT-18 11.34.00','05-OCT-18 2.30.00','05-OCT-18 2.38.00', 3.85, '108');
INSERT INTO PEDIDO VALUES ('100115','10/05/2018','05-OCT-18 12.25.00','05-OCT-18 2.15.00','05-OCT-18 2.20.00', 17.25, '108');
INSERT INTO PEDIDO VALUES ('100116','10/05/2018','05-OCT-18 09.45.00','05-OCT-18 2.45.00','05-OCT-18 1.56.00', 24.75, '108');

/* VALORES EN TABLA PLATO */
INSERT INTO PLATO VALUES ('001','Pollo asado',7.75,20);
INSERT INTO PLATO VALUES ('002','Espaguettis Carbonara',4.25,15);
INSERT INTO PLATO VALUES ('003','Ensaladilla Rusa',3.85,5);
INSERT INTO PLATO VALUES ('004','Patatas fritas',3.00,30);
INSERT INTO PLATO VALUES ('005','Lasaña Carne',8.50,17);
INSERT INTO PLATO VALUES ('006','Calamares fritos',5.75,15);
INSERT INTO PLATO VALUES ('007','Caldo de pollo',3.75,40);
INSERT INTO PLATO VALUES ('008','Natillas chocolate',2.25,25);
INSERT INTO PLATO VALUES ('009','Alioli',1.50,20);
INSERT INTO PLATO VALUES ('010','Paella',8.25,30);
INSERT INTO PLATO VALUES ('011','Fideuá',7.50,15);
INSERT INTO PLATO VALUES ('012','Pastel de queso',2.50,15);
INSERT INTO PLATO VALUES ('013','Lentejas',4.15,35);
INSERT INTO PLATO VALUES ('014','Solomillo a la pimienta',8.75,12);
INSERT INTO PLATO VALUES ('015','Bacalao con tomate',7.50,16);
INSERT INTO PLATO VALUES ('016','Berenjenas rebozadas',2.30,10);
INSERT INTO PLATO VALUES ('017','Berenjenas rebozadas',2.30,10);
/* VALORES EN TABLA DETALLE_PEDIDO */
INSERT INTO DETALLE_PEDIDO VALUES ('100101','1',2,'001',15.5);
INSERT INTO DETALLE_PEDIDO VALUES ('100101','2',3,'004',9);
INSERT INTO DETALLE_PEDIDO VALUES ('100101','3',1,'009',1.5);

INSERT INTO DETALLE_PEDIDO VALUES ('100102','1',1,'003', 3.85);
INSERT INTO DETALLE_PEDIDO VALUES ('100102','2',1,'005', 8.5);
INSERT INTO DETALLE_PEDIDO VALUES ('100102','3',2,'012', 5 );
INSERT INTO DETALLE_PEDIDO VALUES ('100102','4',1,'010', 8.25);

INSERT INTO DETALLE_PEDIDO VALUES ('100103','1',4,'014',35);
INSERT INTO DETALLE_PEDIDO VALUES ('100103','2',3,'011', 22.5);
INSERT INTO DETALLE_PEDIDO VALUES ('100103','3',7,'008', 18);

INSERT INTO DETALLE_PEDIDO VALUES ('100104','1',1,'007', 3.75);

INSERT INTO DETALLE_PEDIDO VALUES ('100105','1',1,'005', 8.50);
INSERT INTO DETALLE_PEDIDO VALUES ('100105','2',1,'007', 3.75);
INSERT INTO DETALLE_PEDIDO VALUES ('100105','3',1,'012', 2.50);

INSERT INTO DETALLE_PEDIDO VALUES ('100106','1',2,'015', 15);
INSERT INTO DETALLE_PEDIDO VALUES ('100106','2',1,'010',8.25);

INSERT INTO DETALLE_PEDIDO VALUES ('100107','1',2,'002',8.50 );
INSERT INTO DETALLE_PEDIDO VALUES ('100107','2',1,'006',5.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100107','3',3,'008', 6.75);

INSERT INTO DETALLE_PEDIDO VALUES ('100108','1',1,'013', 4.15 );
INSERT INTO DETALLE_PEDIDO VALUES ('100108','2',1,'007', 3.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100108','3',2,'010', 16.50 );

INSERT INTO DETALLE_PEDIDO VALUES ('100109','1',1,'001',7.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100109','2',1,'004',3.00 );
INSERT INTO DETALLE_PEDIDO VALUES ('100109','3',1,'009',1.50 );
INSERT INTO DETALLE_PEDIDO VALUES ('100109','4',3,'008',6.75 );

INSERT INTO DETALLE_PEDIDO VALUES ('100110','1',4,'015',30  );

INSERT INTO DETALLE_PEDIDO VALUES ('100111','1',1,'003', 3.85 );
INSERT INTO DETALLE_PEDIDO VALUES ('100111','2',1,'004', 3 );

INSERT INTO DETALLE_PEDIDO VALUES ('100112','1',1,'001', 7.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100112','2',2,'012', 5 );
INSERT INTO DETALLE_PEDIDO VALUES ('100112','3',2,'008', 4.50);

INSERT INTO DETALLE_PEDIDO VALUES ('100113','1',1,'014', 8.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100113','2',1,'011', 7.50 );
INSERT INTO DETALLE_PEDIDO VALUES ('100113','3',1,'005', 8.50);

INSERT INTO DETALLE_PEDIDO VALUES ('100114','1',1,'003', 3.85 );
INSERT INTO DETALLE_PEDIDO VALUES ('100114','2',1,'004', 3 );

INSERT INTO DETALLE_PEDIDO VALUES ('100115','1',1,'001', 7.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100115','2',2,'012', 5 );
INSERT INTO DETALLE_PEDIDO VALUES ('100115','3',2,'008', 4.50);

INSERT INTO DETALLE_PEDIDO VALUES ('100116','1',1,'014', 8.75 );
INSERT INTO DETALLE_PEDIDO VALUES ('100116','2',1,'011', 7.50 );
INSERT INTO DETALLE_PEDIDO VALUES ('100116','3',1,'005', 8.50);
