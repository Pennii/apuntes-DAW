<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>5.4.- Objetos inmutables. </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="generator" content="eXeLearning 2.3.1 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" /></head>
<body class="exe-web-site" id="exe-node-54"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="emptyHeader"></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Utilización de objetos.</a></li>
   <li><a href="1_introduccin.html" class="no-ch">1.- Introducción.</a></li>
   <li><a href="2_fundamentos_de_la_programacin_orientada_a_objetos.html" class="daddy">2.- Fundamentos de la Programación Orientada a Objetos.</a>
   <ul class="other-section">
      <li><a href="21_conceptos.html" class="no-ch">2.1.- Conceptos.</a></li>
      <li><a href="22_beneficios.html" class="no-ch">2.2.- Beneficios.</a></li>
      <li><a href="23_caractersticas.html" class="no-ch">2.3.- Características.</a></li>
      <li><a href="24_lenguajes_de_programacin_orientados_a_objetos.html" class="no-ch">2.4.- Lenguajes de programación orientados a objetos.</a></li>
   </ul>
   </li>
   <li><a href="3_clases_y_objetos_caractersticas_de_los_objetos.html" class="daddy">3.- Clases y Objetos. Características de los objetos.</a>
   <ul class="other-section">
      <li><a href="31_propiedades_y_mtodos_de_los_objetos.html" class="no-ch">3.1.- Propiedades y métodos de los objetos.</a></li>
      <li><a href="32_interaccin_entre_objetos.html" class="no-ch">3.2.- Interacción entre objetos.</a></li>
      <li><a href="33_clases.html" class="no-ch">3.3.- Clases.</a></li>
   </ul>
   </li>
   <li><a href="4_utilizacin_de_objetos.html" class="daddy">4.- Utilización de objetos.</a>
   <ul class="other-section">
      <li><a href="41_ciclo_de_vida_de_los_objetos.html" class="no-ch">4.1.- Ciclo de vida de los objetos.</a></li>
      <li><a href="42_declaracin.html" class="no-ch">4.2.- Declaración.</a></li>
      <li><a href="43_instanciacin.html" class="daddy">4.3.- Instanciación.</a>
      <ul class="other-section">
         <li><a href="431_concepto_de_constructor.html" class="no-ch">4.3.1.- Concepto de constructor</a></li>
      </ul>
      </li>
      <li><a href="44_referencias_a_objetos.html" class="no-ch">4.4.- Referencias a objetos</a></li>
      <li><a href="45_manipulacin.html" class="no-ch">4.5.- Manipulación.</a></li>
      <li><a href="46_destruccin_de_objetos_y_liberacin_de_memoria.html" class="no-ch">4.6.- Destrucción de objetos y liberación de memoria.</a></li>
      <li><a href="47_objetos_string_en_java.html" class="no-ch">4.7.- Objetos String en Java.</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="5_mtodos.html" class="current-page-parent daddy">5.- Métodos.</a>
   <ul>
      <li><a href="51_parmetros_y_valores_devueltos.html" class="no-ch">5.1.- Parámetros y valores devueltos.</a></li>
      <li><a href="52_uso_de_mtodos.html" class="no-ch">5.2.- Uso de métodos</a></li>
      <li><a href="53_documentacin_de_una_clase.html" class="no-ch">5.3.- Documentación de una clase</a></li>
      <li id="active"><a href="54_objetos_inmutables.html" class="active no-ch">5.4.- Objetos inmutables.</a></li>
      <li><a href="55_comparacin_de_objetos_en_java_mtodo_equals.html" class="no-ch">5.5.- Comparación de objetos en Java: método equals.</a></li>
      <li><a href="56_mtodos_estticos.html" class="daddy">5.6.- Métodos estáticos.</a>
      <ul class="other-section">
         <li><a href="561_ejemplos_generar_nmeros_aleatorios.html" class="no-ch">5.6.1.- Ejemplos: generar números aleatorios.</a></li>
         <li><a href="562_mtodos_fbrica_o_pseudoconstructores.html" class="no-ch">5.6.2.- Métodos "fábrica" o pseudoconstructores</a></li>
      </ul>
      </li>
      <li><a href="57_clases_envoltorio_en_java.html" class="no-ch">5.7.- Clases envoltorio en Java.</a></li>
      <li><a href="58_representacin_textual_de_un_objeto_en_java_mtodo_tostring.html" class="no-ch">5.8.- Representación textual de un objeto en Java: método toString.</a></li>
   </ul>
   </li>
   <li><a href="6_bibliotecas_de_clases_paquetes.html" class="daddy">6.- Bibliotecas de clases (paquetes).</a>
   <ul class="other-section">
      <li><a href="61_sentencia_import.html" class="no-ch">6.1.- Sentencia import.</a></li>
      <li><a href="62_bibliotecas_java.html" class="no-ch">6.2.- Bibliotecas Java.</a></li>
   </ul>
   </li>
   <li><a href="7_programacin_de_la_consola_entrada_y_salida_de_la_informacin.html" class="daddy">7.- Programación de la consola: entrada y salida de la información.</a>
   <ul class="other-section">
      <li><a href="71_conceptos_sobre_la_clase_system.html" class="no-ch">7.1.- Conceptos sobre la clase System.</a></li>
      <li><a href="72_entrada_por_teclado_clase_system.html" class="no-ch">7.2.- Entrada por teclado. Clase System.</a></li>
      <li><a href="73_entrada_por_teclado_clase_scanner.html" class="no-ch">7.3.- Entrada por teclado. Clase Scanner.</a></li>
      <li><a href="74_salida_por_pantalla.html" class="no-ch">7.4.- Salida por pantalla.</a></li>
      <li><a href="75_salida_de_error.html" class="no-ch">7.5.- Salida de error.</a></li>
   </ul>
   </li>
   <li><a href="8_manipulacin_de_la_fecha_y_la_hora_en_java.html" class="daddy">8.- Manipulación de la fecha y la hora en Java.</a>
   <ul class="other-section">
      <li><a href="81_localdate.html" class="no-ch">8.1.- LocalDate</a></li>
      <li><a href="82_localtime.html" class="no-ch">8.2.- LocalTime</a></li>
      <li><a href="83_localdatetime.html" class="no-ch">8.3.- LocalDateTime</a></li>
      <li><a href="84_formateado_de_fechas.html" class="no-ch">8.4.- Formateado de fechas</a></li>
      <li><a href="85_chronounit.html" class="no-ch">8.5.- ChronoUnit</a></li>
   </ul>
   </li>
   <li><a href="9_excepciones.html" class="daddy">9.- Excepciones.</a>
   <ul class="other-section">
      <li><a href="91_capturar_una_excepcin_con_try.html" class="no-ch">9.1.- Capturar una excepción con try.</a></li>
      <li><a href="92_el_manejo_de_excepciones_con_catch.html" class="no-ch">9.2.- El manejo de excepciones con catch.</a></li>
   </ul>
   </li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="53_documentacin_de_una_clase.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="55_comparacin_de_objetos_en_java_mtodo_equals.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">5.4.- Objetos inmutables.</h1></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id187">
<div class="iDevice emphasis0">
<div id="ta187_69" class="block iDevice_content">
<p>Se dice que una es <strong>clase inmutable</strong> cuando sus instancias una vez creadas e inicializadas no pueden modificar su estado, es decir, que son <strong>objetos inmutables</strong>. Esto significa que todos los métodos que llevan a cabo operaciones que en principio alterarían el estado interno de estos objetos, en realidad lo que hacen es generar una nueva instancia con ese nuevo estado.</p>
<p>Algunos ejemplos de clases en Java cuyos objetos son inmutables son:</p>
<ul class="lista_verificacion">
<li>la clase <code>String</code>;</li>
<li>las clases envoltorio o "<em><span lang="en">wrappers</span></em>" (<code>Byte</code>, <code>Integer</code>, <code>Integer</code>, <code>Long</code>, <code>Float</code>, <code>Double</code>, <code>Character</code>, <code>Boolean</code>);</li>
<li>las clases para manipulación de fecha y hora: <code>LocalDate</code>, <code>LocalTime</code>, <code>LocalDateTime</code>.</li>
</ul>
<p>Esto significa que cada vez que se llame a un método de un objeto instancia estas clases que implique algún tipo de modificación en su estado, no se va a llevar a cabo ese cambio en el propio objeto sino que se devolverá un nuevo objeto con esos cambios.</p>
<p>Un caso típico de clase inmutable en Java es la clase <code>String</code>. Para objetos instancias esta clase, métodos como <code>concat</code>, <code>replace</code> o <code>trim</code> no modifican el estado del objeto original sino que generan un nuevo objeto con la modificación que resulta de la aplicación del método. Si probamos el siguiente ejemplo:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>// Declaramos y creamos una nueva cadena (declaración + instanciación + asignación)
String cadenaOriginal = new String ("Hola");

// Mostramos su contenido en pantalla
System.out.println("Cadena original: "+ cadenaOriginal);

// Le concatenamos la cadena " caracola" (aplicación del método concat)  
cadenaOriginal.concat(" caracola");

// Volvemos a mostrar su contenido en pantalla        
System.out.println(cadenaOriginal);
</code></pre>
</div>
</div>
<p>podemos observar que la salida del programa es:</p>
<div class="highlighted-code code-style-2 language-latex">
<div>
<pre><code>Cadena original: Hola
Cadena tras la aplicación del método concat: Hola</code></pre>
</div>
</div>
<p>Es decir, que la concatenación no ha afectado al objeto <code>cadenaOriginal</code>, sino que se ha generado (instanciado) un nuevo objeto de la clase <code>String</code> con el resultado de esa modificación (una nueva cadena cuyo valor será "<em>Hola caracola</em>"). Si quisiéramos haber visto el resultado de la modificación en pantalla deberíamos haber mostrado directamente el resultado de la operación:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>// Declaramos y creamos una nueva cadena
String cadenaOriginal = new String ("Hola");

// Mostramos su contenido en pantalla
System.out.println("Cadena original: " + cadenaOriginal);

// Mostrar el resultado de aplicar el método concat        
System.out.println("Cadena tras la aplicación del método concat: " + cadenaOriginal.concat(" caracola"));</code></pre>
</div>
</div>
<p>O bien asignar a una segunda variable de tipo referencia a <code>String</code> ese resultado y a continuación mostrar su contenido por pantalla:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>// Declaramos y creamos una nueva cadena
String cadenaOriginal = new String ("Hola");

// Mostramos su contenido en pantalla
System.out.println("Cadena original: " + cadenaOriginal);

// Declaramos una segunda variable para referenciar objetos de la clase String
String cadenaTransformada;

// Y le asignamos el resultado de aplicar el método concat sobre el cadenaOriginal
cadenaTransformada= cadenaOriginal.concat(" caracola");

// Mostramos el contenido de ese segundo objeto 
System.out.println("Cadena tras la aplicación del método concat: " + cadenaTransformada);</code></pre>
</div>
</div>
<p>En ambos casos deberíamos obtener una salida del tipo:</p>
<div class="highlighted-code code-style-2 language-latex">
<div>
<pre><code>Cadena original: Hola
Cadena tras la aplicación del método concat: Hola caracola</code></pre>
</div>
</div>
<p>La conclusión que obtenemos de este experimento es que métodos de manipulación de este tipo de objetos no afectan al objeto sobre el que se aplica la operación sino que generan un nuevo objeto como resultado de la operación aplicada. En este caso se dice que se trata de <strong>objetos inmutables</strong> y, por extensión, se habla de <strong>clases inmutables</strong>.</p>
<p>En estos casos necesitamos una segunda referencia (una variable) para poder almacenar la referencia al nuevo objeto que se ha creado como resultado de la operación. Si no almacenamos en una variable la referencia al objeto devuelta por el método que se ha invocado para llevar a cabo la operación, esa instancia quedaría sin referenciar desde nuestro programa y el recolector de basura acabará eliminándola.</p>
<p>Si queremos utilizar solamente una variable, podríamos hacerlo volviendo a asignar a la misma variable referencia a <code>String</code> en la que se almacenaba el contenido original, la referencia al nuevo objeto creado tras la operación de concatenación:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>// Declaramos, instanciamos y asignamos una nueva cadena
String miVar = new String("Hola");

// Mostramos su contenido en pantalla
System.out.println("Cadena inicial: " + miVar);

// Y le ahora asignamos a la misma variable el resultado de aplicar el método concat sobre la cadena inicial
miVar = miVar.concat(" Antonio");

// Mostramos el nuevo contenido de la referencia, que ahora apunta a un nuevo objeto String 
System.out.println("Cadena tras la aplicación del método concat: " + miVar);</code></pre>
</div>
</div>
<p>En este caso la salida por pantalla sería idéntica, pero habríamos perdido la referencia a objeto <code>String</code> original, pues en esa variable hemos almacenado ahora la referencia al nuevo objeto <code>String</code> resultado del a concatenación.</p>
<p>Ahora bien, dadas las particularidades de la clase <code>String</code> en Java, lo usual será que:</p>
<ol>
<li>no encuentres el uso de <code>new</code> con una llamada al constructor para crear nuevas cadenas (objetos instancia de la clase <code>String</code>);</li>
<li>no veas el uso del método <code>concat</code> para concatenarlas, sino que te encontrarás directamente con el operador <code>=</code> (asignación) para la instanciación (llamada al constructor) y asignación, así como el operador <code>+</code> para concatenar un objeto <code>String</code> con otro objeto <code>String</code>.</li>
</ol>
<p>Teniendo en cuenta eso, el anterior fragmento de código quedaría de la siguiente manera:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>// Declaramos, instanciamos y asignamos una nueva cadena
// (llamada implícita al constructor sin necesidad de new ni de escribir el constructor)
String miVar = "Hola";

// Mostramos su contenido en pantalla
System.out.println("Cadena inicial: " + miVar);

// Y le asignamos el resultado de aplicar el operador de concatenación + sobre la cadena inicial
miVar = miVar + " Antonio";

// Mostramos el contenido de ese segundo objeto 
System.out.println("Cadena tras la aplicación del método concat: " + miVar);
</code></pre>
</div>
</div>
<p>El resultado en este caso también debería ser el mismo.</p>
</div>
</div>
</div>
<div class="iDevice_wrapper DestacadofpdIdevice" id="id99">
<div class="iDevice emphasis0" >
<div class="iDevice_destacadofpd">
<div id="ta99_151" class="block iDevice_content">
<p>Con las <strong>clases inmutables</strong>, el estado de un objeto no se modifica (objeto inmutable), sino que cada intento de modificación del estado de un objeto (llamada a un método que implique cambios) genera como resultado una nueva instancia.</p>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id188">
<div class="iDevice emphasis_debesconocerfpd" >
<div class="iDevice_header" style="background-image:url(icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta188_44" class="block iDevice_content">
<p>En el siguiente vídeo se explica gráficamente lo que se acaba de exponer más arriba.</p>
<p></p>
<div class="elemento_centrado">
<div class="elemento_centrado titulo">Clases inmutables</div>
<div class="elemento_centrado">
<p><iframe width="320" height="240" src="//www.youtube.com/embed/WnTnCPiBhV0" frameborder="0"></iframe></p>
</div>
<div class="elemento_centrado credenciales"><a title="Ver el resumen del vídeo" href="PROG03_Descripcion_video_Inmutable.html" target="_blank">Resumen del vídeo</a></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="53_documentacin_de_una_clase.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="55_comparacin_de_objetos_en_java_mtodo_equals.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
</div>
<script type="text/javascript" src="_fpd_js.js"></script></body></html>